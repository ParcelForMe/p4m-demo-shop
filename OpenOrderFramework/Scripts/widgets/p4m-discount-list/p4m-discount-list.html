<link rel="import" href="../../Lib/polymer/polymer.html" />
<link rel="import" href="../../Lib/iron-icons/iron-icons.html" />

<dom-module id="p4m-discount-list">

    <template>
        <div id="content">
            <template is="dom-repeat" items="{{cartData.Discounts}}">
                <div class="discount">
                    <div id="p4mDiscountListRemoveBtn" class="p4m-cell closeBtn p4m-button p4m-button-active neutral" on-click="deleteItem"><iron-icon  name$="{{item.Code}}" icon="icons:close"></iron-icon></div>
                    <div class="p4m-cell discount-code">{{item.Code}}</div>
                    <div class="p4m-cell discount-description">{{item.Description}}</div>                
                    
                </div>
            </template>

        </div>
    </template>

    <style>
        #content {
            display: flex;
            flex-direction: column;
        }

        #content .discount {
            display: flex;
            flex-direction: row;
        }

        #content .discount .p4m-cell {
            padding: 4px;
            margin: 10px;
        }

        .discount-code {
            text-transform: uppercase;
        }

        div#p4mDiscountListRemoveBtn {
            min-width: 10px;
        }

    </style>

    <script>

        Polymer({
            is: "p4m-discount-list",

            properties: {
                cartData: {
                    type: Object,
                    notify: true
                }
            },
            listeners: {
                'discount': 'addDiscount'
            },

            ready: function()
            {

            },

            addDiscount: function (e) {
                console.log("Heard discount", e);
            },

            deleteItem: function (e) {
                console.log("Delete", e.target);
                this.fire('discountdelete', e.target.getAttribute('name'));
            }

        });
    </script>
</dom-module>