<link rel="import" href="../../Lib/polymer/polymer.html" />
<link rel="import" href="../../Lib/iron-input/iron-input.html" />
<link rel="import" href="../../Lib/iron-icons/iron-icons.html" />
<link rel="import" href="../p4m-wish/p4m-wish.html" />

<dom-module id="p4m-cart-card">

    <template>
        <div id="container">
            <div id="image" class="card-panel">
                <img src="{{cartItemData.LinkToImage}}" />
            </div>
            
            <div id="details" class="card-panel">
                <div id="description">{{cartItemData.Desc}}</div>
                <div id="price">{{cartItemData.Price}}</div>
            </div>

            <div id="quantity" class="card-panel">
                <label for="qty">Qty</label>
                <input is="iron-input" prevent-invalid-input allowed-pattern="[0-9]" type="text" id="qty" bind-value="{{cartItemData.Qty}}" />
            </div>

        </div>
        <div id="actions">
            <a href="#" on-tap="remove">Delete</a><span class="divider">|</span><p4m-wish item-data="{{cartItemData}}" on-wish="onWish" on-unwish="onUnwish"></p4m-wish>
        </div>
        
    </template>

    <style>
        #container {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;

        }
        #details, #quantity {
            display: flex;
            flex-direction: column;
        }
        #details {
            width: 50%;
        }
        #quantity {
            width: 20%;
        }
        #image {
           width: 30%;
        }
        #image img {
            height: 50px;
            width:auto;
        }

        input#qty {
            width: 90%;
            margin: auto;
        }
        .card-panel {
            padding: 4px;
        }
        #actions {
            width: 80%;
            margin: auto;
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
        }
        .divider {
            margin-left: 4px;
            margin-right:4px;
        }
    </style>

    <script>
    //
        Polymer({
            is: "p4m-cart-card",

            properties: {
                cartItemData: {
                    type: Object,
                    notify: true,
                    observer: "onDataChange"
                }
            },

            ready: function()
            {
            },

            remove: function() {
                this.set('cartItemData.Qty', 0);
            },

            onDataChange: function (e) {
            },

            onWish: function (e) {
                //Trigger removal from shopping cart
                console.log("Received wish", e);          
                this.remove();
               
            }

        });
    </script>
</dom-module>
